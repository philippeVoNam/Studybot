PREFIX study: <file:///schema/study.ttl/>
PREFIX studybot: <file:///data/>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX teach: <http://linkedscience.org/teach/ns#>
PREFIX aiiso: <http://purl.org/vocab/aiiso/schema#>
PREFIX ical: <http://www.w3.org/2002/12/cal#>

SELECT ?courseName WHERE {{
    ?course a teach:Course .
    ?course teach:courseTitle ?courseName .
    ?course study:hasCourseEvent ?event .
    ?event study:hasMaterial ?material .
    ?material foaf:topic ?topic .
    ?topic rdfs:label ?topicLabel .
    FILTER (lang(?topicLabel) = 'en' && contains(lcase(?topicLabel), 'knowledge graph'@en) || contains('knowledge graph'@en, lcase(?topicLabel)))
}} GROUP BY ?courseName
ORDER BY DESC(count(1))
